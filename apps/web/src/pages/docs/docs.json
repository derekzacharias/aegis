{
  "version": 1,
  "generatedAt": "2025-11-05T00:00:00Z",
  "sections": [
    {
      "id": "overview",
      "category": "Overview",
      "title": "What is AegisGRC",
      "slug": "overview",
      "summary": "AegisGRC automates security hardening with Ansible and validates compliance with Chef InSpec. It maps results to controls, tracks drift, and visualizes posture.",
      "contentMarkdown": "## AegisGRC Overview\n\nAegisGRC is a compliance automation platform that hardens infrastructure with **Ansible** and verifies compliance with **Chef InSpec**. It aligns with **NIST RMF**, **NIST CSF**, **DISA STIG**, and **CIS Benchmarks**.\n\n### Core value\n- Reduce manual effort by codifying hardening and assessment\n- Provide audit-ready evidence and POA&M inputs\n- Show before vs after compliance and track drift over time\n\n### Typical flow\n1. Register an Asset\n2. Apply a baseline with Ansible in check or enforce mode\n3. Verify compliance with Chef InSpec\n4. Review Findings, generate Reports, trigger Remediation\n"
    },
    {
      "id": "architecture",
      "category": "Architecture",
      "title": "System Architecture",
      "slug": "architecture",
      "summary": "FastAPI backend, React UI, Celery workers, runner containers for Ansible and InSpec, PostgreSQL for state, object storage for raw evidence.",
      "contentMarkdown": "## Architecture\n\n```\n[React UI]  ->  [FastAPI]  ->  [PostgreSQL]\n                 |  |\\\n                 |  | \\-> [Object Storage: evidence/]\n                 |  \\--> [Celery + Redis]\n                 |        |-> [Runner: Ansible]\n                 |        \\-> [Runner: InSpec]\n```\n\n- **FastAPI**: REST API, auth, RBAC, OpenAPI docs\n- **PostgreSQL**: assets, baselines, scans, findings, jobs\n- **Celery + Redis**: async jobs for scans and remediation\n- **Runner containers**: isolated environments that call `ansible-playbook` and `inspec exec`\n- **Object storage**: raw reports, logs, and artifacts under `evidence/`\n"
    },
    {
      "id": "technologies-fastapi",
      "category": "Core Technologies",
      "title": "FastAPI",
      "slug": "fastapi",
      "summary": "Service layer that exposes secure REST endpoints and orchestrates jobs.",
      "contentMarkdown": "## FastAPI\n\nFastAPI serves the Aegis API. It handles authentication, RBAC, validation, and orchestration.\n\n**Key endpoints**\n- `POST /api/scans` start a scan\n- `GET /api/scans` list scans\n- `GET /api/findings` filter findings\n- `GET /api/reports/delta` compare scans\n\n**Security**\n- JWT access and refresh tokens\n- Role checks in the service layer\n"
    },
    {
      "id": "technologies-postgres",
      "category": "Core Technologies",
      "title": "PostgreSQL",
      "slug": "postgresql",
      "summary": "Authoritative store for assets, baselines, scans, and normalized findings.",
      "contentMarkdown": "## PostgreSQL\n\nTables:\n- **asset**: id, name, kind, address, platform, env\n- **baseline**: id, name, standard, version, tool, source_url\n- **scan**: id, tool, asset_id, baseline_id, status, times, raw_report_url, tool_version\n- **finding**: id, scan_id, asset_id, control_id, title, severity, status, evidence, first_seen, last_seen, profile_version\n- **job**: id, kind, scan_id, status, logs_url\n\nAll rows include `created_at` and `updated_at`.\n"
    },
    {
      "id": "technologies-celery",
      "category": "Core Technologies",
      "title": "Celery and Redis",
      "slug": "celery-redis",
      "summary": "Background workers that execute scans and remediation safely and asynchronously.",
      "contentMarkdown": "## Celery and Redis\n\nCelery workers run potentially long operations such as `ansible-playbook` and `inspec exec`. Redis provides the broker and result backend.\n\n- Jobs are idempotent where possible\n- Retries use exponential backoff\n- Logs are streamed to object storage and linked in Job records\n"
    },
    {
      "id": "technologies-react",
      "category": "Core Technologies",
      "title": "React UI",
      "slug": "react-ui",
      "summary": "Clean dashboard with Scans, Findings, and Reports plus delta views.",
      "contentMarkdown": "## React UI\n\nBuilt with React 18, Vite, TypeScript, Tailwind, and shadcn/ui.\n\n**Pages**\n- **Dashboard**: compliance percent, failed controls by severity, recent scans\n- **Scans**: table, filters, job logs, raw report download\n- **Findings**: filters by severity, status, tool, export CSV\n- **Reports**: before vs after delta, PDF export\n"
    },
    {
      "id": "ansible",
      "category": "Integrations",
      "title": "Ansible Hardening",
      "slug": "ansible",
      "summary": "Use Ansible roles or playbooks to apply CIS and STIG settings. Support check and enforce modes.",
      "contentMarkdown": "## Ansible Hardening\n\nAnsible applies security baselines to targets.\n\n**Typical command**\n```bash\nansible-playbook -i inventory.yml site.yml --check\n```\n\n**Workflow**\n1. Run in check mode to preview changes\n2. Run in enforce mode to apply\n3. Schedule InSpec verification automatically\n\n**Baselines**\n- CIS Ubuntu 20.04\n- DISA STIG roles from trusted sources\n"
    },
    {
      "id": "inspec",
      "category": "Integrations",
      "title": "Chef InSpec Compliance",
      "slug": "inspec",
      "summary": "Execute InSpec profiles to verify alignment with CIS or STIG and produce audit-ready JSON.",
      "contentMarkdown": "## Chef InSpec Compliance\n\nChef InSpec validates that systems meet baseline requirements.\n\n**Typical command**\n```bash\ninspec exec cis-ubuntu-20.04-level1-server \\\n  -t ssh://user@host \\\n  --reporter json > results.json\n```\n\nAegis parses JSON into normalized findings and stores the raw payload in `evidence/`.\n"
    },
    {
      "id": "integration-guide",
      "category": "Guides",
      "title": "Integration Guide",
      "slug": "integration-guide",
      "summary": "Connect targets, baselines, and schedules to automate hardening and assessment.",
      "contentMarkdown": "## Integration Guide\n\n### Connect targets\n- Linux over SSH with key auth\n- Windows over WinRM (planned)\n\n### Add baselines\n- Import Ansible roles or playbooks\n- Register InSpec profiles and versions\n\n### Schedules\n- Create recurring jobs by environment or tag\n- Notify via email or Slack on completion\n"
    },
    {
      "id": "using-aegis",
      "category": "Guides",
      "title": "Using Aegis",
      "slug": "using-aegis",
      "summary": "Quick start to run a harden then verify loop and review results in the UI.",
      "contentMarkdown": "## Using Aegis\n\n1. **Register an Asset** with address, platform, and env\n2. **Select a Baseline** for Ansible and a matching InSpec profile\n3. **Start a Scan** in check mode\n4. **Enforce** if the preview looks correct\n5. **Verify** with InSpec automatically\n6. **Review Findings** and export a report\n"
    },
    {
      "id": "admin",
      "category": "Administration",
      "title": "Administration and RBAC",
      "slug": "administration",
      "summary": "Manage users, roles, secrets, and runner isolation.",
      "contentMarkdown": "## Administration and RBAC\n\n**Roles**\n- Admin, Engineer, Viewer\n\n**Secrets**\n- Use env vars and mounted files for credentials\n- Never log passwords or private keys\n\n**Runner isolation**\n- Runners run in separate containers with least privilege\n- Only required volumes and env vars are mounted at runtime\n"
    },
    {
      "id": "security",
      "category": "Security and Compliance",
      "title": "Security and Compliance",
      "slug": "security-and-compliance",
      "summary": "NIST RMF and CSF alignment, control mapping, evidence handling, and audit logs.",
      "contentMarkdown": "## Security and Compliance\n\n- **Alignment**: NIST RMF Step 3 Implement via Ansible, Step 4 Assess via InSpec\n- **Mapping**: CIS and STIG rules mapped to control identifiers\n- **Evidence**: raw reports stored with hashes and metadata\n- **Audit**: immutable logs for scans, findings, and admin actions\n"
    },
    {
      "id": "troubleshooting",
      "category": "Troubleshooting",
      "title": "Troubleshooting",
      "slug": "troubleshooting",
      "summary": "Common issues with credentials, connectivity, baselines, and runners.",
      "contentMarkdown": "## Troubleshooting\n\n**SSH fails**\n- Confirm key permissions and user shell access\n- Verify network reachability and allowed ciphers\n\n**Ansible role errors**\n- Pin role versions and review variables\n- Run in `--check` first\n\n**InSpec cannot connect**\n- Confirm `-t` target string and auth method\n- Test a simple control to isolate connectivity\n\n**No findings appear**\n- Check parser logs and raw JSON in evidence folder\n- Confirm baseline and profile versions match\n"
    },
    {
      "id": "api-snippets",
      "category": "Developer Guide",
      "title": "API Quick Reference",
      "slug": "api-quick-reference",
      "summary": "Minimal examples for scans, findings, and delta reports.",
      "contentMarkdown": "## API Quick Reference\n\n**Start a scan**\n```bash\ncurl -X POST https://aegis.local/api/scans \\\n  -H 'Authorization: Bearer <token>' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"tool\": \"ansible\",\n    \"asset_id\": \"<uuid>\",\n    \"baseline_id\": \"<uuid>\",\n    \"mode\": \"check\",\n    \"target\": {\"ssh\": {\"host\": \"10.0.0.10\", \"user\": \"ubuntu\", \"key_ref\": \"ssh-key-1\"}}\n  }'\n```\n\n**List findings**\n```bash\ncurl -H 'Authorization: Bearer <token>' \\\n  'https://aegis.local/api/findings?asset_id=<uuid>&severity=high&status=fail'\n```\n\n**Delta report**\n```bash\ncurl -H 'Authorization: Bearer <token>' \\\n  'https://aegis.local/api/reports/delta?asset_id=<uuid>&from_scan=<uuid>&to_scan=<uuid>'\n```\n"
    },
    {
      "id": "glossary",
      "category": "Appendix",
      "title": "Glossary",
      "slug": "glossary",
      "summary": "Common terms used in Aegis and compliance automation.",
      "contentMarkdown": "## Glossary\n\n- **Asset**: a server, VM, container, or device under management\n- **Baseline**: a set of hardening rules that implements a standard\n- **Scan**: a discrete hardening or assessment run\n- **Finding**: a normalized control result with status and severity\n- **Delta report**: comparison of two scans showing posture change\n"
    }
  ]
}
